makedepends+=('git')
source+=("$pkgname::git+$url")
md5sums+=('SKIP')
provides+=("${pkgname%-git}")
conflicts+=("${pkgname%-git}")

pkgver() {
  cd $pkgname
  git describe --long --tags 2>/dev/null | sed 's/[^[:digit:]]*\(.\+\)-\([[:digit:]]\+\)-g\([[:xdigit:]]\{7\}\)/\1.r\2.g\3/'
  [ ${PIPESTATUS[0]} -ne 0 ] && printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

# vim: filetype=sh
