# Maintainer: XZS <d dot f dot fischer at web dot de>

pkgname='gnome-shell-extension-hide-titlebar'
_extname='hide-titlebar@mrapp.sourceforge.com'
pkgdesc="Allows to hide the titlebars of maximized windows"
pkgver=1
pkgrel=5
arch=(any)
url='http://sourceforge.net/projects/hide-titlebar/'
license=(GPLv2)
depends=('gnome-shell>=3.4' 'gnome-shell<=3.14' 'xorg-xprop')
install=gschemas-and-warn.install
source=("${pkgname}.zip::http://sourceforge.net/projects/hide-titlebar/files/latest/download")
md5sums=('835eb02de1edb99c6c715570ea45c6e3')

build() {
  # gnome-shell version 3.10 and up are not officially supported.
  cd "$_extname"
  sed -i '2s/]/, "3.10", "3.12", "3.14"]/' metadata.json
  rm "schemas/gschemas.compiled"
}

package() {
  destdir="$pkgdir/usr/share/gnome-shell/extensions"
  schemadir="$pkgdir/usr/share/glib-2.0"
  install -d "$destdir" "$schemadir"
  mv "$_extname/schemas" "$schemadir"
  mv "$_extname" "$destdir"
}
